status: response.status
headers: response.headers
body: response.body

response:
  when:
    - matches: request.url.pathname
      pattern: '^/?$'
      use: app
    - matches: request.url.pathname
      pattern: '^/js/*$'
      use: scripts
    - matches: request.url.pathname
      pattern: '^/(icons/.+|favicon.ico)$'
      use: static
  default: notFound

app:
  inline:
    status:
      resolver: inline
      inline: 200
    headers:
      resolver: inline
      inline:
        content-type:
          resolver: inline
          inline: 'text/html'
    body:
      resolver: template
      engine: mustache
      template: './templates/app.mst'
      provide:
        title:
          resolver: inline
          inline: 'A simple UPWARD application'
        bundles: assetManifest.bundles

scripts:
  directory:
    resolver: inline
    inline: ./dist

static:
  directory:
    resolver: inline
    inline: './static'

assetManifest:
  resolver: file
  file:
    resolver: inline
    inline: './static/bundles-manifest.json'

notFound:
  inline:
    status:
      resolver: inline
      inline: 404
    headers:
      resolver: inline
      inline:
        content-type: 'text/html'
    body:
      resolve: inline
      inline: 'Page not found!'
